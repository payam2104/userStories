<div class="justify-align-between titel-container">
  <h1>User Story Map</h1>
  <div>
    <span class="export-btn">
      <app-button [buttonLabel]="'Export JSON'" (callParentFunction)="exportJson()"></app-button>
    </span>
    <span>
      <input #fileInput type="file" accept=".json" style="display: none" (change)="importJson($event)" />
      <app-button [buttonLabel]="'Import JSON'" (callParentFunction)="fileInput.click()"></app-button>
    </span>
  </div>
</div>

<div class="story-map">
  @if (dropListReady()) {
  <app-unassigned-issues
    class="unassigned-container"
    [connectedDropListIds]="allDropListIds()"
    (dropped)="dropFromUnassigned($event)" />
  }

  <div class="journeys-container" cdkDropListGroup>
    @for (journey of journeys(); track journey.id) {
    <app-journey-column
      class="journey-column"
      [journey]="journey"
      [connectedDropListIds]="allDropListIds()"
      (rendered)="onColumnRendered()"
      (dropped)="dropFromStep($event.event, $event.stepId)" />
    }
  </div>
</div>